{% load staticfiles %}

<!-- Auto refresh results -->
<!--<meta http-equiv="refresh" content="5">-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Internetový obchod s vecami pripojitaľnými na internet">
    <meta name="author" content="Martin Nevický & Martin Števko">
    <meta name="keywords" content="eshop, obchod, internet, sieť, veci">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:url" content="{{ request.META.HTTP_HOST }}" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Internet vecí" />
    <meta property="og:description" content="Internetový obchod s vecami pripojitaľnými na internet. Vytvorte si úplne vlatnú kompletnú sieť!" />
    <meta property="og:image" content="{% static "img/iot_fb.jpg" %}" />

    <title>{{ the_product.name }}</title>
    <link rel="icon" href="{% static "img/icon.png" %}" type="png">
    <link rel="stylesheet" href="{% static "css/general.css" %}">
  </head>
  <body onload="previous_style()">
    <header>
      <div class="topnav" id="topnavbar">
        {% if user.is_superuser %}
          <a href="{% url 'admin:index' %}">Administration</a>
        {% endif %}
        <a href="{% url 'eshop:index' %}">Domov</a>
        <div class="dropdown active">
          <a class="active dropbtn" href="{% url 'eshop:categories' dvsn.id %}">
            {{ dvsn.name }}
          </a>
          <div class="dropdown-content">
            {% for cat in ctgr %}
              <a href="{% url 'eshop:products' cat.id %}">{{ cat.name }}</a>
            {% endfor %}
          </div>
        </div>

        {% for division in menu %}
          <div class="dropdown">
            <a class="active dropbtn" href="{% url 'eshop:categories' division.0.id %}">
              {{ division.0.name }}
            </a>
            <div class="dropdown-content">
              {% for cat in division.1 %}
                <a href="{% url 'eshop:products' cat.id %}">{{ cat.name }}</a>
              {% endfor %}
            </div>
          </div>
        {% endfor %}

        <a href="{% url 'eshop:contact' %}">Kontakt</a>
        <a href="{% url 'eshop:basket' %}">Košík</a>
        <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()">&#9776;</a>
      </div>
    </header>
    <div id="content">
      <section id="main">
        <h1>{{ the_product.name }}</h1>
        <img src="{{ the_product.image.url }}" alt="{{ the_product.name }}" width="300px">
        <p>
          {{ the_product.description }}
          <br>
          Cena: {{ the_product.price }}
          <br>
          {% if the_product.in_storage %}
            Na sklade
          {% else %}
            Momentálne nemáme
          {% endif %}
        </p>
        <form method="POST" autocomplete="off">
          {% csrf_token %}
          <label for="amount">Množstvo:</label>
          <input id="amount" name="amount" type="number" min="1" value="1" required>
          <br>
          {% if the_product.in_storage %}
            <input type="submit" value="Pridať do košíka" name="add_to_cart">
          {% else %}
            Produkt momentálne nie je možné objednať, pretože sa nenachádza na sklade.
          {% endif %}
        </form>
        <div>
          <button onclick="show_hide_section('1')">
            Bližšia špecifikácia
          </button>
          <button onclick="show_hide_section('2')">
            Galéria produktu
          </button>
          <button onclick="show_hide_section('3')">
            Recenzie
          </button>
        </div>
      </section>

      <section id="1" style="display: 'block'">
        {% if the_specification %}
          <h3>Špecifikácia</h3>
          <ul>
            {% for spec in the_specification %}
              <li>{{ spec.name }} - {{ spec.value }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <center>
            <p>
              Výrobca k tomuto produktu neposkytuje žiadnu užšiu špecifikáciu.
            </p>
          </center>
        {% endif %}
      </section>
      <section id="2" style="display: 'none'">
        {% if the_gallery %}
          <h3>Galéria</h3>
          {% for img in the_gallery %}
            <img src="{{ img.image.url }}" alt="{{ img.name }}" width="200px">
          {% endfor %}
        {% else %}
          <center>
            <p>
              K tomuto produktu neboli do galérie nahrané žiadne fotografie.
            </p>
          </center>
        {% endif %}
      </section>
      <section id="3" style="display: 'none'">
        {% if the_review %}
          <h3>Recenzie</h3>
          {% for rev in the_review %}
            <div>
              {{ rev.author }}
              <p>{{ rev.text }}</p>
              {{ rev.time }}
            </div>
          {% endfor %}
          <form method="POST" autocomplete="off">
            {% csrf_token %}
            <label>Pridajte recenziu</label>
            <br>
            <input name="author" type="text" maxlength="50" placeholder="Používateľské meno" required>
            <br>
            <input name="mail" type="email" placeholder="priklad@gmail.com" required>
            <br>
            <textarea name="text" rows="6" cols="50" placeholder="Text recenzie" required></textarea>
            <br>
            <input type="submit" value="Publikovať" name="add_review">
          </form>
        {% else %}
          <center>
            <p>
              K tomuto produktu zatiaľ neboli pridané žiadne recenzie.
            </p>
          </center>
        {% endif %}
      </section>
    </div>
    <footer>
      paticka
    </footer>
  </body>
  <script src="{% static "js/navbar.js" %}"></script>
  <script src="{% static "js/product_view.js" %}"></script>
</html>
